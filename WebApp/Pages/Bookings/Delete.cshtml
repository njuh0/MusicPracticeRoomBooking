@page
@model WebApp.Pages.Bookings.DeleteModel
@{
    ViewData["Title"] = "Delete Booking";
}

<div class="container mt-4">
    <h1>Delete Booking</h1>

    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle"></i>
        <strong>Are you sure you want to delete this booking?</strong>
        <p class="mb-0 mt-2">
            This will soft delete the booking, preserving it in the system for historical records. 
            The booking will no longer appear in active lists but will remain in reports and audit logs.
        </p>
    </div>

    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Booking Details</h5>
            <dl class="row">
                <dt class="col-sm-3">Student</dt>
                <dd class="col-sm-9">
                    @Model.Booking.Student.FirstName @Model.Booking.Student.LastName
                </dd>

                <dt class="col-sm-3">Room</dt>
                <dd class="col-sm-9">
                    @Model.Booking.Room.Name (@Model.Booking.Room.Type)
                </dd>

                <dt class="col-sm-3">Date</dt>
                <dd class="col-sm-9">
                    @Model.Booking.StartTime.ToString("MMMM dd, yyyy")
                </dd>

                <dt class="col-sm-3">Time</dt>
                <dd class="col-sm-9">
                    @Model.Booking.StartTime.ToString("HH:mm") - @Model.Booking.EndTime.ToString("HH:mm")
                    <span class="badge bg-secondary ms-2">
                        @((Model.Booking.EndTime - Model.Booking.StartTime).TotalHours.ToString("F1")) hours
                    </span>
                </dd>

                <dt class="col-sm-3">Purpose</dt>
                <dd class="col-sm-9">
                    @if (Model.Booking.Purpose == DAL.Entities.BookingPurpose.RecitalPrep)
                    {
                        <span class="badge bg-warning text-dark">Recital Prep</span>
                    }
                    else if (Model.Booking.Purpose == DAL.Entities.BookingPurpose.EnsembleRehearsal)
                    {
                        <span class="badge bg-info text-dark">Ensemble Rehearsal</span>
                    }
                    else
                    {
                        <span class="badge bg-secondary">Regular Practice</span>
                    }
                </dd>

                <dt class="col-sm-3">Status</dt>
                <dd class="col-sm-9">
                    @if (Model.Booking.Status == DAL.Entities.BookingStatus.Confirmed)
                    {
                        <span class="badge bg-success">Confirmed</span>
                    }
                    else if (Model.Booking.Status == DAL.Entities.BookingStatus.Cancelled)
                    {
                        <span class="badge bg-danger">Cancelled</span>
                    }
                    else if (Model.Booking.Status == DAL.Entities.BookingStatus.NoShow)
                    {
                        <span class="badge bg-warning text-dark">No Show</span>
                    }
                    else
                    {
                        <span class="badge bg-info">Completed</span>
                    }
                </dd>

                <dt class="col-sm-3">Created</dt>
                <dd class="col-sm-9">
                    @Model.Booking.CreatedAt.ToString("MMM dd, yyyy HH:mm")
                </dd>

                @if (Model.Booking.CheckedInAt.HasValue)
                {
                    <dt class="col-sm-3">Checked In</dt>
                    <dd class="col-sm-9">
                        @Model.Booking.CheckedInAt.Value.ToString("MMM dd, yyyy HH:mm")
                    </dd>
                }

                @if (Model.Booking.CancelledAt.HasValue)
                {
                    <dt class="col-sm-3">Cancelled</dt>
                    <dd class="col-sm-9">
                        @Model.Booking.CancelledAt.Value.ToString("MMM dd, yyyy HH:mm")
                    </dd>
                }
            </dl>

            <form method="post">
                <input type="hidden" asp-for="Booking.Id" />
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash"></i> Delete Booking
                    </button>
                    <a asp-page="Index" class="btn btn-secondary">
                        <i class="bi bi-x-circle"></i> Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
